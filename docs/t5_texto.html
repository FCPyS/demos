<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>DEMOS - T5: Análisis de texto (I)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">DEMOS</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Inicio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">Sobre el proyecto</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./quienes.html" rel="" target="">
 <span class="menu-text">¿Quienes somos?</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./conv.html" rel="" target="">
 <span class="menu-text">Conversatorio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./recursos.html" rel="" target="">
 <span class="menu-text">Recursos en línea</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./talleres.html">Talleres</a></li><li class="breadcrumb-item"><a href="./t5_texto.html">T5: Análisis de texto (I)</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Talleres</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./talleres.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Talleres</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./t1_cacenso.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">T1: Cuestionario Ampliado</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./t2_endiseg2021.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">T2: ENDISEG 2021</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./t3_endireh2021.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">T3: ENDIREH 2021</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./t4_enoe223.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">T4: ENOE t223</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./t5_texto.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">T5: Análisis de texto (I)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./t5_texto2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">T5: Análisis de texto (II)</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#descarga-el-proyecto-desde-acá" id="toc-descarga-el-proyecto-desde-acá" class="nav-link active" data-scroll-target="#descarga-el-proyecto-desde-acá">Descarga el proyecto desde acá</a></li>
  <li><a href="#paquetes" id="toc-paquetes" class="nav-link" data-scroll-target="#paquetes">Paquetes</a></li>
  <li><a href="#importar-desde-un-archivo-.txt" id="toc-importar-desde-un-archivo-.txt" class="nav-link" data-scroll-target="#importar-desde-un-archivo-.txt">Importar desde un archivo .txt</a></li>
  <li><a href="#importar-un-epub" id="toc-importar-un-epub" class="nav-link" data-scroll-target="#importar-un-epub">Importar un epub</a></li>
  <li><a href="#importar-un-pdf-conpdftools" id="toc-importar-un-pdf-conpdftools" class="nav-link" data-scroll-target="#importar-un-pdf-conpdftools">Importar un pdf con<code>{pdftools}</code></a></li>
  <li><a href="#importar-una-imagen-con-texto-con-tesseract" id="toc-importar-una-imagen-con-texto-con-tesseract" class="nav-link" data-scroll-target="#importar-una-imagen-con-texto-con-tesseract">Importar una imagen con texto con <code>{tesseract}</code></a></li>
  <li><a href="#stringr-limpieza-de-variables-de-cadena" id="toc-stringr-limpieza-de-variables-de-cadena" class="nav-link" data-scroll-target="#stringr-limpieza-de-variables-de-cadena"><code>{stringr}</code> Limpieza de variables de cadena</a></li>
  <li><a href="#más-operaciones-con-cadenas-con-stringr-y-tokenizers" id="toc-más-operaciones-con-cadenas-con-stringr-y-tokenizers" class="nav-link" data-scroll-target="#más-operaciones-con-cadenas-con-stringr-y-tokenizers">Más operaciones con cadenas con <code>{stringr}</code> y <code>{tokenizers}</code></a></li>
  <li><a href="#tokenización-para-análisis-de-texto" id="toc-tokenización-para-análisis-de-texto" class="nav-link" data-scroll-target="#tokenización-para-análisis-de-texto">Tokenización para análisis de texto</a>
  <ul class="collapse">
  <li><a href="#tokenización-con-tidytext" id="toc-tokenización-con-tidytext" class="nav-link" data-scroll-target="#tokenización-con-tidytext">Tokenización con <code>{tidytext}</code></a></li>
  <li><a href="#tokenización-con-udpipe" id="toc-tokenización-con-udpipe" class="nav-link" data-scroll-target="#tokenización-con-udpipe">Tokenización con <code>{udpipe}</code></a></li>
  </ul></li>
  <li><a href="#estadísticas-de-las-palabras" id="toc-estadísticas-de-las-palabras" class="nav-link" data-scroll-target="#estadísticas-de-las-palabras">Estadísticas de las palabras</a></li>
  <li><a href="#comparando-tokens-palabras-y-más" id="toc-comparando-tokens-palabras-y-más" class="nav-link" data-scroll-target="#comparando-tokens-palabras-y-más">Comparando tokens, palabras y más</a></li>
  <li><a href="#nubes-de-palabras" id="toc-nubes-de-palabras" class="nav-link" data-scroll-target="#nubes-de-palabras">Nubes de palabras</a>
  <ul class="collapse">
  <li><a href="#nube-con-wordcloud" id="toc-nube-con-wordcloud" class="nav-link" data-scroll-target="#nube-con-wordcloud">Nube con <code>{wordcloud}</code></a></li>
  <li><a href="#nube-con-ggwordcloud" id="toc-nube-con-ggwordcloud" class="nav-link" data-scroll-target="#nube-con-ggwordcloud">Nube con <code>{ggwordcloud}</code></a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/FCPyS/demos/edit/main/t5_texto.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/FCPyS/demos/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">T5: Análisis de texto (I)</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="descarga-el-proyecto-desde-acá" class="level2">
<h2 class="anchored" data-anchor-id="descarga-el-proyecto-desde-acá">Descarga el proyecto desde acá</h2>
<p><a href="https://tinyurl.com/demos-talleres" class="uri">https://tinyurl.com/demos-talleres</a></p>
<p>En esta primera práctica veremos algunas acciones para importación de texto para su análisis, así como el manejo de diferentes fuentes, así como importación de tablas desde pdf.</p>
</section>
<section id="paquetes" class="level2">
<h2 class="anchored" data-anchor-id="paquetes">Paquetes</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"pacman"</span>)) <span class="fu">install.packages</span>(<span class="st">"pacman"</span>) <span class="co"># instala pacman si se requiere</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: pacman</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, magrittr, tidytext,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>               tm, </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>               NLP, SnowballC, </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>               wordcloud, ggwordcloud,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>               quanteda, udpipe,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>               igraph, ggraph, <span class="co"># para unos gráficos</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>               readxl, janitor, textrank,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>               broom, epubr, pdftools, tesseract, tokenizers,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>               rvest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="importar-desde-un-archivo-.txt" class="level2">
<h2 class="anchored" data-anchor-id="importar-desde-un-archivo-.txt">Importar desde un archivo .txt</h2>
<p>Vamos a importar el discurso que el presidente dio el 1 de julio de 2022: <a href="https://lopezobrador.org.mx/2022/07/01/discurso-del-presidente-andres-manuel-lopez-obrador-en-4-ano-del-triunfo-democratico-historico/" class="uri">https://lopezobrador.org.mx/2022/07/01/discurso-del-presidente-andres-manuel-lopez-obrador-en-4-ano-del-triunfo-democratico-historico/</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>amlo <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">"text/20220107_amlo.txt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Revisemos un poco este objeto</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(amlo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Length     Class      Mode 
      113 character character </code></pre>
</div>
</div>
<p>Tenemos 113 párrafos. Al momento no tenemos más información que lo revisaremos en siguientes secciones</p>
</section>
<section id="importar-un-epub" class="level2">
<h2 class="anchored" data-anchor-id="importar-un-epub">Importar un epub</h2>
<p>El proyecto Gutenberg tiene una selección de libros publicados sin problemas de derechos de Autor. Trabajaremos con los <em>Cuentos de Amor de Locura y de Muerte</em> de Horacio Quiroga</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>epubr<span class="sc">::</span><span class="fu">epub_head</span>(<span class="st">"text/quiroga.epub"</span>) <span class="co"># muestra lo primero </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 2
  section           text                                                  
  &lt;chr&gt;             &lt;chr&gt;                                                 
1 pg-header         "The Project Gutenberg eBook of Cuentos de Amor de "  
2 id00249           "#LOS OJOS SOMBRIOS#\n\nDespués de las primeras seman"
3 id00535           "#EL INFIERNO ARTIFICIAL#\n\nLas noches en que hay lu"
4 id00745           "#EL PERRO RABIOSO#\n\nEl 20 de marzo de este año, lo"
5 id01047           "#LOS MENSÚ#\n\nCayetano Maidana y Esteban Podeley, p"
6 id01212           "#LOS PESCADORES DE VIGAS#\n\nEl motivo fué cierto ju"
7 id01445           "#LA MENINGITIS Y SU SOMBRA#\n\nNo vuelvo de mi sorpr"
8 pg-footer         "*** END OF THIS PROJECT GUTENBERG EBOOK ***\n      " 
9 coverpage-wrapper ""                                                    </code></pre>
</div>
</div>
<p>Es una selección de cuentos. Revisemos un poco la meta-data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>epubr<span class="sc">::</span><span class="fu">epub_meta</span>(<span class="st">"text/quiroga.epub"</span>) <span class="co"># muestra el meta-data del libro</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 8
  rights                  identifier creator title language subject date  source
  &lt;chr&gt;                   &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; 
1 Public domain in the U… http://ww… Horaci… Cuen… es       Short … 2004… https…</code></pre>
</div>
</div>
<p>Hoy sí lo vamos a importar en nuestro ambiente:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> epubr<span class="sc">::</span><span class="fu">epub</span>(<span class="st">"text/quiroga.epub"</span>) <span class="co"># Importa todo el libro en el objeto x, pero no queremos todo</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 9
  rights         identifier creator title language subject date  source data    
  &lt;chr&gt;          &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;list&gt;  
1 Public domain… http://ww… Horaci… Cuen… es       Short … 2004… https… &lt;tibble&gt;</code></pre>
</div>
</div>
<p>¿Dónde están los cuentos?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1
Columns: 9
$ rights     &lt;chr&gt; "Public domain in the USA."
$ identifier &lt;chr&gt; "http://www.gutenberg.org/13507"
$ creator    &lt;chr&gt; "Horacio Quiroga"
$ title      &lt;chr&gt; "Cuentos de Amor de Locura y de Muerte"
$ language   &lt;chr&gt; "es"
$ subject    &lt;chr&gt; "Short stories, Uruguayan|Uruguayan fiction"
$ date       &lt;chr&gt; "2004-09-20|2022-10-06T21:09:10.400769+00:00"
$ source     &lt;chr&gt; "https://www.gutenberg.org/files/13507/13507-8.txt"
$ data       &lt;list&gt; [&lt;tbl_df[9 x 4]&gt;]</code></pre>
</div>
</div>
<p>Vemos que en realidad la última variable es una lista que adentro trae un objeto “tbl_df” de 9 x 4. Revisemos qué hay</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x<span class="sc">$</span>data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
# A tibble: 9 × 4
  section           text                                             nword nchar
  &lt;chr&gt;             &lt;chr&gt;                                            &lt;int&gt; &lt;int&gt;
1 pg-header         "The Project Gutenberg eBook of Cuentos de Amor…  6435 37893
2 id00249           "#LOS OJOS SOMBRIOS#\n\nDespués de las primeras…  5831 34153
3 id00535           "#EL INFIERNO ARTIFICIAL#\n\nLas noches en que …  7190 42642
4 id00745           "#EL PERRO RABIOSO#\n\nEl 20 de marzo de este a…  9356 55680
5 id01047           "#LOS MENSÚ#\n\nCayetano Maidana y Esteban Pode…  6816 40770
6 id01212           "#LOS PESCADORES DE VIGAS#\n\nEl motivo fué cie…  6325 38243
7 id01445           "#LA MENINGITIS Y SU SOMBRA#\n\nNo vuelvo de mi…  7364 43275
8 pg-footer         "*** END OF THIS PROJECT GUTENBERG EBOOK ***\n …  2894 18593
9 coverpage-wrapper ""                                                   0     0</code></pre>
</div>
</div>
<p>Como es una lista, pero una lista de un solo elemento <code>[[1]]</code>, vamos a consultarlo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span>data[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 4
  section           text                                             nword nchar
  &lt;chr&gt;             &lt;chr&gt;                                            &lt;int&gt; &lt;int&gt;
1 pg-header         "The Project Gutenberg eBook of Cuentos de Amor…  6435 37893
2 id00249           "#LOS OJOS SOMBRIOS#\n\nDespués de las primeras…  5831 34153
3 id00535           "#EL INFIERNO ARTIFICIAL#\n\nLas noches en que …  7190 42642
4 id00745           "#EL PERRO RABIOSO#\n\nEl 20 de marzo de este a…  9356 55680
5 id01047           "#LOS MENSÚ#\n\nCayetano Maidana y Esteban Pode…  6816 40770
6 id01212           "#LOS PESCADORES DE VIGAS#\n\nEl motivo fué cie…  6325 38243
7 id01445           "#LA MENINGITIS Y SU SOMBRA#\n\nNo vuelvo de mi…  7364 43275
8 pg-footer         "*** END OF THIS PROJECT GUTENBERG EBOOK ***\n …  2894 18593
9 coverpage-wrapper ""                                                   0     0</code></pre>
</div>
</div>
<p>Esta es nuestra matriz de datos. Aquí podemos elegir una sección. Por ejemplo un cuento</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>epub<span class="ot">&lt;-</span>x<span class="sc">$</span>data[[<span class="dv">1</span>]]</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(epub)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
<p>Vamos a quedarnos con un solo cuento:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>ojos_sombrios <span class="ot">&lt;-</span> epub <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(section <span class="sc">==</span><span class="st">"id00249"</span>) <span class="sc">%&gt;%</span>  <span class="co"># nos quedamos con el primer cuento</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(text)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>ojos_sombrios</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  text                                                                          
  &lt;chr&gt;                                                                         
1 "#LOS OJOS SOMBRIOS#\n\nDespués de las primeras semanas de romper con Elena, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(ojos_sombrios)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
<p>Sigue teniendo formato de data.frame. Para poder usar algunos elementos necesitamos convertirlo a texto. Por eso lo vamos a “pegar”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>ojos_sombrios<span class="ot">&lt;-</span><span class="fu">paste</span>(ojos_sombrios<span class="sc">$</span>text) <span class="co"># lo volvemos caracter</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(ojos_sombrios)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>Con esto ya podremos hacer muchas operaciones de aquí en adelante.</p>
</section>
<section id="importar-un-pdf-conpdftools" class="level2">
<h2 class="anchored" data-anchor-id="importar-un-pdf-conpdftools">Importar un pdf con<code>{pdftools}</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>dof4nov <span class="ot">&lt;-</span> pdftools<span class="sc">::</span><span class="fu">pdf_text</span>(<span class="st">"text/04112022-MAT.pdf"</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>dof4nov[<span class="dv">6</span>] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "   6                                            DIARIO OFICIAL                 Viernes 4 de noviembre de 2022\n\n   Con oficio número SEGOB/CNBP/2354/2022, de fecha 12 de agosto de 2022, “LA CNBP” autorizó la\nprocedencia de la solicitud de acceso al recurso concursable, lo anterior, con fundamento en los artículos 21,\n22, 23 y 24 de los “Lineamientos”, y en términos de la Cláusula Vigésima del Convenio de Coordinación\ny Adhesión.\n   Por lo que, resulta necesario utilizar la totalidad de los recursos destinados para el otorgamiento de\nsubsidios a las entidades federativas para realizar acciones de búsqueda en materia de desaparición forzada\nde personas y desaparición cometida por particulares.\n                                              DECLARACIONES\n   I.     “LA CNBP” declara que:\n   I.1.   En virtud de que el presente Convenio Modificatorio se deriva del Convenio de Coordinación y\n          Adhesión, las Declaraciones manifestadas en dicho instrumento permanecen vigentes, con\n          excepción de las expresadas en el presente Convenio Modificatorio, por lo que se tienen por\n          reproducidas y ratificadas en su integridad como si a la letra se insertaran en el Convenio de\n          Coordinación y Adhesión de referencia.\n   I.2.   Las documentales, justificativas y comprobatorias que acreditan y sustentan la procedencia de este\n          instrumento, obran en el expediente de “LA CNBP”; lo anterior, para todos los fines y efectos\n          legales a que haya lugar, por lo que corresponde a dicha área cualquier justificación y sustento sobre\n          el particular.\n   II.    La “ENTIDAD FEDERATIVA” declara que:\n   II.1. Es su intención celebrar el presente Convenio Modificatorio al Convenio de Coordinación y Adhesión,\n         en términos del presente instrumento jurídico.\n   II.2. En virtud de que el presente Convenio Modificatorio se deriva del Convenio de Coordinación y\n         Adhesión, las declaraciones manifestadas en dicho instrumento permanecen vigentes con excepción\n         de las expresadas en el presente Convenio Modificatorio por lo que se tienen por reproducidas\n         y ratificadas en su integridad como si a la letra se insertaran en el Convenio de Coordinación y\n         Adhesión de referencia, actualizándose las identificadas con los numerales II.4 y II.5, toda vez que\n         hubo sustitución de funcionarios, para quedar como sigue.\n             II.4. Samuel Sotelo Salgado, Secretario de Gobierno del Poder Ejecutivo Estatal, acredita\n                   su personalidad con el nombramiento otorgado a su favor por el Gobernador\n                   Constitucional del Estado con fecha 03 de mayo de 2022, y tiene facultades para\n                   suscribir el presente Convenio, de conformidad con los artículos 74 de la Constitución\n                   Política del Estado Libre y Soberano de Morelos; 3, párrafo tercero, 4, fracción I, 9,\n                   fracción II, 13, fracción VI, 14 y 22, fracción VII, de la Ley Orgánica de la\n                   Administración Pública del Estado Libre y Soberano de Morelos, y 8 y 9, fracción VII,\n                   del Reglamento Interior de la Secretaría de Gobierno.\n             II.5. José Gerardo López Huérfano, Encargado de Despacho de la Secretaría de Hacienda\n                   del Estado, acredita su personalidad con el nombramiento otorgado a su favor por el\n                   Gobernador del Estado con fecha 03 de mayo de 2022, y tiene facultades para\n                   suscribir el presente Convenio, de conformidad con los artículos 74 de la Constitución\n                   Política del Estado Libre y Soberano de Morelos; 3, 4, fracción I, 9, fracción III, 13,\n                   fracción VI, 14, 15 y 23, fracción IV, de la Ley Orgánica de la Administración Pública\n                   del Estado Libre y Soberano de Morelos, y 11, 12, fracción XII y 41 del Reglamento\n                   Interior de la Secretaría de Hacienda.\n   III.   “LAS PARTES” declaran que:\n   III.1. Cuentan con las facultades necesarias para intervenir en la suscripción del presente Convenio\n          Modificatorio.\n   III.2. Se reconocen mutuamente la personalidad con que se ostentan y manifiestan su conformidad para la\n          celebración del presente Convenio Modificatorio.\n   III.3. Celebran el presente instrumento, de conformidad con lo establecido en los artículos 21, 22, 23,\n          24 y 25 de los “Lineamientos” y en términos de la Cláusula Vigésima del Convenio de Coordinación\n          y Adhesión.\n"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(dof4nov)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>Para verlo mejor podemos usar el comando <code>cat()</code> de base para cada una de las “hojas”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(dof4nov[<span class="dv">6</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   6                                            DIARIO OFICIAL                 Viernes 4 de noviembre de 2022

   Con oficio número SEGOB/CNBP/2354/2022, de fecha 12 de agosto de 2022, “LA CNBP” autorizó la
procedencia de la solicitud de acceso al recurso concursable, lo anterior, con fundamento en los artículos 21,
22, 23 y 24 de los “Lineamientos”, y en términos de la Cláusula Vigésima del Convenio de Coordinación
y Adhesión.
   Por lo que, resulta necesario utilizar la totalidad de los recursos destinados para el otorgamiento de
subsidios a las entidades federativas para realizar acciones de búsqueda en materia de desaparición forzada
de personas y desaparición cometida por particulares.
                                              DECLARACIONES
   I.     “LA CNBP” declara que:
   I.1.   En virtud de que el presente Convenio Modificatorio se deriva del Convenio de Coordinación y
          Adhesión, las Declaraciones manifestadas en dicho instrumento permanecen vigentes, con
          excepción de las expresadas en el presente Convenio Modificatorio, por lo que se tienen por
          reproducidas y ratificadas en su integridad como si a la letra se insertaran en el Convenio de
          Coordinación y Adhesión de referencia.
   I.2.   Las documentales, justificativas y comprobatorias que acreditan y sustentan la procedencia de este
          instrumento, obran en el expediente de “LA CNBP”; lo anterior, para todos los fines y efectos
          legales a que haya lugar, por lo que corresponde a dicha área cualquier justificación y sustento sobre
          el particular.
   II.    La “ENTIDAD FEDERATIVA” declara que:
   II.1. Es su intención celebrar el presente Convenio Modificatorio al Convenio de Coordinación y Adhesión,
         en términos del presente instrumento jurídico.
   II.2. En virtud de que el presente Convenio Modificatorio se deriva del Convenio de Coordinación y
         Adhesión, las declaraciones manifestadas en dicho instrumento permanecen vigentes con excepción
         de las expresadas en el presente Convenio Modificatorio por lo que se tienen por reproducidas
         y ratificadas en su integridad como si a la letra se insertaran en el Convenio de Coordinación y
         Adhesión de referencia, actualizándose las identificadas con los numerales II.4 y II.5, toda vez que
         hubo sustitución de funcionarios, para quedar como sigue.
             II.4. Samuel Sotelo Salgado, Secretario de Gobierno del Poder Ejecutivo Estatal, acredita
                   su personalidad con el nombramiento otorgado a su favor por el Gobernador
                   Constitucional del Estado con fecha 03 de mayo de 2022, y tiene facultades para
                   suscribir el presente Convenio, de conformidad con los artículos 74 de la Constitución
                   Política del Estado Libre y Soberano de Morelos; 3, párrafo tercero, 4, fracción I, 9,
                   fracción II, 13, fracción VI, 14 y 22, fracción VII, de la Ley Orgánica de la
                   Administración Pública del Estado Libre y Soberano de Morelos, y 8 y 9, fracción VII,
                   del Reglamento Interior de la Secretaría de Gobierno.
             II.5. José Gerardo López Huérfano, Encargado de Despacho de la Secretaría de Hacienda
                   del Estado, acredita su personalidad con el nombramiento otorgado a su favor por el
                   Gobernador del Estado con fecha 03 de mayo de 2022, y tiene facultades para
                   suscribir el presente Convenio, de conformidad con los artículos 74 de la Constitución
                   Política del Estado Libre y Soberano de Morelos; 3, 4, fracción I, 9, fracción III, 13,
                   fracción VI, 14, 15 y 23, fracción IV, de la Ley Orgánica de la Administración Pública
                   del Estado Libre y Soberano de Morelos, y 11, 12, fracción XII y 41 del Reglamento
                   Interior de la Secretaría de Hacienda.
   III.   “LAS PARTES” declaran que:
   III.1. Cuentan con las facultades necesarias para intervenir en la suscripción del presente Convenio
          Modificatorio.
   III.2. Se reconocen mutuamente la personalidad con que se ostentan y manifiestan su conformidad para la
          celebración del presente Convenio Modificatorio.
   III.3. Celebran el presente instrumento, de conformidad con lo establecido en los artículos 21, 22, 23,
          24 y 25 de los “Lineamientos” y en términos de la Cláusula Vigésima del Convenio de Coordinación
          y Adhesión.</code></pre>
</div>
</div>
</section>
<section id="importar-una-imagen-con-texto-con-tesseract" class="level2">
<h2 class="anchored" data-anchor-id="importar-una-imagen-con-texto-con-tesseract">Importar una imagen con texto con <code>{tesseract}</code></h2>
<p>El paquete <code>{tesseract}</code> …</p>
<blockquote class="blockquote">
<p>“utiliza datos de entrenamiento para realizar OCR. La mayoría de los sistemas utilizan de forma predeterminada los datos de entrenamiento en inglés”. Para mejorar el rendimiento de OCR para otros idiomas, puede instalar los datos de entrenamiento de su distribución… En Windows y MacOS, puede instalar idiomas mediante la función tesseract_download, que descarga datos de entrenamiento directamente desde github y los almacena en la ruta del disco…” (traducido de la viñeta)</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">is.na</span>(<span class="fu">match</span>(<span class="st">"spa"</span>, tesseract<span class="sc">::</span><span class="fu">tesseract_info</span>()<span class="sc">$</span>available)))</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  tesseract<span class="sc">::</span><span class="fu">tesseract_download</span>(<span class="st">"spa"</span>) <span class="co"># baja el entrenamiento para español</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>spa <span class="ot">&lt;-</span> tesseract<span class="sc">::</span><span class="fu">tesseract</span>(<span class="st">"spa"</span>) <span class="co"># aquí este será el "engine"</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> tesseract<span class="sc">::</span><span class="fu">ocr</span>(<span class="st">"text/texto1.png"</span>, <span class="co">#ruta donde está la imagen</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">engine =</span> spa) <span class="co"># que lo lea en español</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NOTA

Las denominaciones empleadas en esta publicación y la forma en que aparecen
presentados los datos que contiene no implican, de parte de la Secretaría de las
Naciones Unidas, juicio alguno sobre la condición jurídica de ninguno de los países o
territorios citados o de sus autoridades, ni respecto de la delimitación de sus fronte-
ras O límites.

En algunos cuadros, las designaciones economías “desarrolladas” y “en
desarrollo”? se emplean por razones estadísticas y no expresan necesariamente juicio
alguno sobre la etapa alcanzada por un determinado país o zona en el proceso de
desarrollo,

El término “país” usado en el texto de esta publicación también se refiere, cuan-
do proceda, a territorios o áreas.

Los puntos de vista que se exponen en esta publicación son los de sus respectivos
autores y no entrañan la manifestación de opinión alguna por parte de la Secretaría
de las Naciones Unidas.

Esta publicación ha sido preparada y refundida con arreglo a la práctica y
requerimientos de las Naciones Unidas.

Las signaturas de los documentos de las Naciones Unidas se componen de letras
mayúsculas y cifras. La mención de una de tales signaturas indica que se hace
referencia a un documento de las Naciones Unidas.</code></pre>
</div>
</div>
</section>
<section id="stringr-limpieza-de-variables-de-cadena" class="level2">
<h2 class="anchored" data-anchor-id="stringr-limpieza-de-variables-de-cadena"><code>{stringr}</code> Limpieza de variables de cadena</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_squish</span>(text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "NOTA Las denominaciones empleadas en esta publicación y la forma en que aparecen presentados los datos que contiene no implican, de parte de la Secretaría de las Naciones Unidas, juicio alguno sobre la condición jurídica de ninguno de los países o territorios citados o de sus autoridades, ni respecto de la delimitación de sus fronte- ras O límites. En algunos cuadros, las designaciones economías “desarrolladas” y “en desarrollo”? se emplean por razones estadísticas y no expresan necesariamente juicio alguno sobre la etapa alcanzada por un determinado país o zona en el proceso de desarrollo, El término “país” usado en el texto de esta publicación también se refiere, cuan- do proceda, a territorios o áreas. Los puntos de vista que se exponen en esta publicación son los de sus respectivos autores y no entrañan la manifestación de opinión alguna por parte de la Secretaría de las Naciones Unidas. Esta publicación ha sido preparada y refundida con arreglo a la práctica y requerimientos de las Naciones Unidas. Las signaturas de los documentos de las Naciones Unidas se componen de letras mayúsculas y cifras. La mención de una de tales signaturas indica que se hace referencia a un documento de las Naciones Unidas."</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>nota<span class="ot">&lt;-</span>stringr<span class="sc">::</span><span class="fu">str_split_fixed</span>(text, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>, <span class="at">n=</span><span class="dv">10</span>) <span class="do">## por párrafos</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>nota</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]  
[1,] "NOTA"
     [,2]                                                                                                                                                                                                                                                                                                                                                           
[1,] "Las denominaciones empleadas en esta publicación y la forma en que aparecen\npresentados los datos que contiene no implican, de parte de la Secretaría de las\nNaciones Unidas, juicio alguno sobre la condición jurídica de ninguno de los países o\nterritorios citados o de sus autoridades, ni respecto de la delimitación de sus fronte-\nras O límites."
     [,3]                                                                                                                                                                                                                                                       
[1,] "En algunos cuadros, las designaciones economías “desarrolladas” y “en\ndesarrollo”? se emplean por razones estadísticas y no expresan necesariamente juicio\nalguno sobre la etapa alcanzada por un determinado país o zona en el proceso de\ndesarrollo,"
     [,4]                                                                                                                   
[1,] "El término “país” usado en el texto de esta publicación también se refiere, cuan-\ndo proceda, a territorios o áreas."
     [,5]                                                                                                                                                                                             
[1,] "Los puntos de vista que se exponen en esta publicación son los de sus respectivos\nautores y no entrañan la manifestación de opinión alguna por parte de la Secretaría\nde las Naciones Unidas."
     [,6]                                                                                                                
[1,] "Esta publicación ha sido preparada y refundida con arreglo a la práctica y\nrequerimientos de las Naciones Unidas."
     [,7]                                                                                                                                                                                                               
[1,] "Las signaturas de los documentos de las Naciones Unidas se componen de letras\nmayúsculas y cifras. La mención de una de tales signaturas indica que se hace\nreferencia a un documento de las Naciones Unidas.\n"
     [,8] [,9] [,10]
[1,] ""   ""   ""   </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_count</span>(text, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>nota<span class="ot">&lt;-</span>stringr<span class="sc">::</span><span class="fu">str_split_fixed</span>(text,</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">pattern=</span><span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>, </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">n=</span><span class="fu">str_count</span>(text, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)<span class="sc">+</span><span class="dv">1</span>) <span class="do">## por párrafos</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>nota</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]  
[1,] "NOTA"
     [,2]                                                                                                                                                                                                                                                                                                                                                           
[1,] "Las denominaciones empleadas en esta publicación y la forma en que aparecen\npresentados los datos que contiene no implican, de parte de la Secretaría de las\nNaciones Unidas, juicio alguno sobre la condición jurídica de ninguno de los países o\nterritorios citados o de sus autoridades, ni respecto de la delimitación de sus fronte-\nras O límites."
     [,3]                                                                                                                                                                                                                                                       
[1,] "En algunos cuadros, las designaciones economías “desarrolladas” y “en\ndesarrollo”? se emplean por razones estadísticas y no expresan necesariamente juicio\nalguno sobre la etapa alcanzada por un determinado país o zona en el proceso de\ndesarrollo,"
     [,4]                                                                                                                   
[1,] "El término “país” usado en el texto de esta publicación también se refiere, cuan-\ndo proceda, a territorios o áreas."
     [,5]                                                                                                                                                                                             
[1,] "Los puntos de vista que se exponen en esta publicación son los de sus respectivos\nautores y no entrañan la manifestación de opinión alguna por parte de la Secretaría\nde las Naciones Unidas."
     [,6]                                                                                                                
[1,] "Esta publicación ha sido preparada y refundida con arreglo a la práctica y\nrequerimientos de las Naciones Unidas."
     [,7]                                                                                                                                                                                                               
[1,] "Las signaturas de los documentos de las Naciones Unidas se componen de letras\nmayúsculas y cifras. La mención de una de tales signaturas indica que se hace\nreferencia a un documento de las Naciones Unidas.\n"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_squish</span>(nota)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "NOTA"                                                                                                                                                                                                                                                                                                                                                     
[2] "Las denominaciones empleadas en esta publicación y la forma en que aparecen presentados los datos que contiene no implican, de parte de la Secretaría de las Naciones Unidas, juicio alguno sobre la condición jurídica de ninguno de los países o territorios citados o de sus autoridades, ni respecto de la delimitación de sus fronte- ras O límites."
[3] "En algunos cuadros, las designaciones economías “desarrolladas” y “en desarrollo”? se emplean por razones estadísticas y no expresan necesariamente juicio alguno sobre la etapa alcanzada por un determinado país o zona en el proceso de desarrollo,"                                                                                                   
[4] "El término “país” usado en el texto de esta publicación también se refiere, cuan- do proceda, a territorios o áreas."                                                                                                                                                                                                                                     
[5] "Los puntos de vista que se exponen en esta publicación son los de sus respectivos autores y no entrañan la manifestación de opinión alguna por parte de la Secretaría de las Naciones Unidas."                                                                                                                                                            
[6] "Esta publicación ha sido preparada y refundida con arreglo a la práctica y requerimientos de las Naciones Unidas."                                                                                                                                                                                                                                        
[7] "Las signaturas de los documentos de las Naciones Unidas se componen de letras mayúsculas y cifras. La mención de una de tales signaturas indica que se hace referencia a un documento de las Naciones Unidas."                                                                                                                                            </code></pre>
</div>
</div>
<p>Si queremos quitar lo “-”, lo podemos hacer:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>nota<span class="ot">&lt;-</span>stringr<span class="sc">::</span><span class="fu">str_squish</span>(nota)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(nota, </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">pattern=</span><span class="st">"- "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "NOTA"                                                                                                                                                                                                                                                                                                                                                   
[2] "Las denominaciones empleadas en esta publicación y la forma en que aparecen presentados los datos que contiene no implican, de parte de la Secretaría de las Naciones Unidas, juicio alguno sobre la condición jurídica de ninguno de los países o territorios citados o de sus autoridades, ni respecto de la delimitación de sus fronteras O límites."
[3] "En algunos cuadros, las designaciones economías “desarrolladas” y “en desarrollo”? se emplean por razones estadísticas y no expresan necesariamente juicio alguno sobre la etapa alcanzada por un determinado país o zona en el proceso de desarrollo,"                                                                                                 
[4] "El término “país” usado en el texto de esta publicación también se refiere, cuando proceda, a territorios o áreas."                                                                                                                                                                                                                                     
[5] "Los puntos de vista que se exponen en esta publicación son los de sus respectivos autores y no entrañan la manifestación de opinión alguna por parte de la Secretaría de las Naciones Unidas."                                                                                                                                                          
[6] "Esta publicación ha sido preparada y refundida con arreglo a la práctica y requerimientos de las Naciones Unidas."                                                                                                                                                                                                                                      
[7] "Las signaturas de los documentos de las Naciones Unidas se componen de letras mayúsculas y cifras. La mención de una de tales signaturas indica que se hace referencia a un documento de las Naciones Unidas."                                                                                                                                          </code></pre>
</div>
</div>
</section>
<section id="más-operaciones-con-cadenas-con-stringr-y-tokenizers" class="level2">
<h2 class="anchored" data-anchor-id="más-operaciones-con-cadenas-con-stringr-y-tokenizers">Más operaciones con cadenas con <code>{stringr}</code> y <code>{tokenizers}</code></h2>
<p>Ya vimos el conteo de algunos patrones y cómo podemos quitar algunos. Trabajemos con el cuento de Quiroga, que también está un poco sucio, y veamos como podemos seguir utilizando el formato tidy</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>ojos_sombrios<span class="ot">&lt;-</span>ojos_sombrios <span class="sc">%&gt;%</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_split_fixed</span>( <span class="at">pattern=</span><span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>, <span class="at">n=</span><span class="fu">str_count</span>(text, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)<span class="sc">+</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="do">## por párrafos %</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_squish</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Hay un personaje que se llama Nébel, veámos cuantas veces aparece:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ojos_sombrios)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Length     Class      Mode 
        7 character character </code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>ojos_sombrios <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_count</span>(<span class="at">pattern=</span><span class="st">"Vezzera"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 21</code></pre>
</div>
</div>
<p>Vamos a ver cuántas palabras tiene cada párrafos, hay unos párrafos vacíos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>tokenizers<span class="sc">::</span><span class="fu">count_words</span>(ojos_sombrios)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]    3   62   69  135   46   12 5635</code></pre>
</div>
</div>
<p>Revisemos el discurso de Amlo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>tokenizers<span class="sc">::</span><span class="fu">count_words</span>(amlo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]   3   0   2   0   4   0   5   0   2   0   3   0   0  24   0 124   0   0
 [19] 514   0   0   0   0   0  57   0 113   0  33   0 150   0  27   0   0   0
 [37]   0   0   0   0  94   0 171   0  28   0 139   0   0   0   0   0   0   0
 [55] 293   0  25   0  81   0 133   0   0   0   0   0   0   0 180   0 123   0
 [73] 141   0 145   0   0   0   0   0   0   0  99   0  56   0 116   0 114   0
 [91]  87   0   0   0 214   0 208   0  58   0  89   0  85   0   0   0   3   0
[109]  40   0 174   0  99</code></pre>
</div>
</div>
<p>De los 113 párrafos tenemos varios que están en 0. Vamos a eliminarlos. Vemos que txt reconoció los párrafos sin problemas, sin necesidad de poner la marca de párrafo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>count<span class="ot">&lt;-</span>tokenizers<span class="sc">::</span><span class="fu">count_words</span>(amlo) </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>count<span class="sc">==</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE
 [13]  TRUE FALSE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
 [25] FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE
 [37]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE
 [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE
 [61] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE
 [73] FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE
 [85] FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE FALSE  TRUE
 [97] FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE FALSE  TRUE
[109] FALSE  TRUE FALSE  TRUE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>amlo<span class="ot">&lt;-</span>amlo[<span class="sc">!</span>count<span class="sc">==</span><span class="dv">0</span>] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Vamos a jugar más con algunas opciones de <code>{tokenizers}</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>tokenizers<span class="sc">::</span><span class="fu">count_words</span>(amlo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]   3   2   4   5   2   3  24 124 514  57 113  33 150  27  94 171  28 139 293
[20]  25  81 133 180 123 141 145  99  56 116 114  87 214 208  58  89  85   3  40
[39] 174  99</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>tokenizers<span class="sc">::</span><span class="fu">count_sentences</span>(amlo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  1  1  1  1  1  1  4 12  3  4  2  2  1  1  6  1  2  8  1  1  3  4  5  1
[26]  4  1  1  3  1  1  2  3  1  5  1  1  2  6  2</code></pre>
</div>
</div>
</section>
<section id="tokenización-para-análisis-de-texto" class="level2">
<h2 class="anchored" data-anchor-id="tokenización-para-análisis-de-texto">Tokenización para análisis de texto</h2>
<p>Las palabras tienen un papel en el lenguaje, por lo cual muchas veces la unidad que usaremos será esa. Uno de los primeros pasos para el análisis de texto será descomponer nuestros textos en palabras.</p>
<section id="tokenización-con-tidytext" class="level3">
<h3 class="anchored" data-anchor-id="tokenización-con-tidytext">Tokenización con <code>{tidytext}</code></h3>
<p>Para usar <code>{tidytext}</code>, necesitamos que nuestro texto esté en formato tibble:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>amlo_df <span class="ot">&lt;-</span><span class="fu">tibble</span>(<span class="at">text=</span>amlo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A partir de esto podemos pasar al proceso de tokenización:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>amlo_df <span class="sc">%&gt;%</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,056 × 1
   word        
   &lt;chr&gt;       
 1 amigas      
 2 y           
 3 amigos      
 4 invitados   
 5 especiales  
 6 presidentes 
 7 municipales 
 8 presidentas 
 9 municipales 
10 gobernadores
# ℹ 4,046 more rows</code></pre>
</div>
</div>
<p>Podemos hacer un tabulado de estos elementos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>amlo_df <span class="sc">%&gt;%</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  tidytext<span class="sc">::</span><span class="fu">unnest_tokens</span>(word, text) <span class="sc">%&gt;%</span> </span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(word) <span class="sc">%&gt;%</span> </span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n) <span class="sc">%&gt;%</span> </span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> word   n    percent
   de 260 0.06410256
   la 179 0.04413215
    y 145 0.03574951
   en 134 0.03303748
   el 124 0.03057199
  que 120 0.02958580
    a  84 0.02071006
   se  83 0.02046351
  los  59 0.01454635
   es  53 0.01306706</code></pre>
</div>
</div>
<p>Importa el tipo de palabra!!! En muchos idiomas las preposiciones y determinantes son bastante comunes. Hay varios diccionarios, incluso los podemos modificar. Para este ejercicio utilizaremos las palabras comunes del paquete <code>{quanteda}</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>quanteda<span class="sc">::</span><span class="fu">stopwords</span>(<span class="at">language=</span><span class="st">"spa"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "de"           "la"           "que"          "el"           "en"          
  [6] "y"            "a"            "los"          "del"          "se"          
 [11] "las"          "por"          "un"           "para"         "con"         
 [16] "no"           "una"          "su"           "al"           "lo"          
 [21] "como"         "más"          "pero"         "sus"          "le"          
 [26] "ya"           "o"            "este"         "sí"           "porque"      
 [31] "esta"         "entre"        "cuando"       "muy"          "sin"         
 [36] "sobre"        "también"      "me"           "hasta"        "hay"         
 [41] "donde"        "quien"        "desde"        "todo"         "nos"         
 [46] "durante"      "todos"        "uno"          "les"          "ni"          
 [51] "contra"       "otros"        "ese"          "eso"          "ante"        
 [56] "ellos"        "e"            "esto"         "mí"           "antes"       
 [61] "algunos"      "qué"          "unos"         "yo"           "otro"        
 [66] "otras"        "otra"         "él"           "tanto"        "esa"         
 [71] "estos"        "mucho"        "quienes"      "nada"         "muchos"      
 [76] "cual"         "poco"         "ella"         "estar"        "estas"       
 [81] "algunas"      "algo"         "nosotros"     "mi"           "mis"         
 [86] "tú"           "te"           "ti"           "tu"           "tus"         
 [91] "ellas"        "nosotras"     "vosotros"     "vosotras"     "os"          
 [96] "mío"          "mía"          "míos"         "mías"         "tuyo"        
[101] "tuya"         "tuyos"        "tuyas"        "suyo"         "suya"        
[106] "suyos"        "suyas"        "nuestro"      "nuestra"      "nuestros"    
[111] "nuestras"     "vuestro"      "vuestra"      "vuestros"     "vuestras"    
[116] "esos"         "esas"         "estoy"        "estás"        "está"        
[121] "estamos"      "estáis"       "están"        "esté"         "estés"       
[126] "estemos"      "estéis"       "estén"        "estaré"       "estarás"     
[131] "estará"       "estaremos"    "estaréis"     "estarán"      "estaría"     
[136] "estarías"     "estaríamos"   "estaríais"    "estarían"     "estaba"      
[141] "estabas"      "estábamos"    "estabais"     "estaban"      "estuve"      
[146] "estuviste"    "estuvo"       "estuvimos"    "estuvisteis"  "estuvieron"  
[151] "estuviera"    "estuvieras"   "estuviéramos" "estuvierais"  "estuvieran"  
[156] "estuviese"    "estuvieses"   "estuviésemos" "estuvieseis"  "estuviesen"  
[161] "estando"      "estado"       "estada"       "estados"      "estadas"     
[166] "estad"        "he"           "has"          "ha"           "hemos"       
[171] "habéis"       "han"          "haya"         "hayas"        "hayamos"     
[176] "hayáis"       "hayan"        "habré"        "habrás"       "habrá"       
[181] "habremos"     "habréis"      "habrán"       "habría"       "habrías"     
[186] "habríamos"    "habríais"     "habrían"      "había"        "habías"      
[191] "habíamos"     "habíais"      "habían"       "hube"         "hubiste"     
[196] "hubo"         "hubimos"      "hubisteis"    "hubieron"     "hubiera"     
[201] "hubieras"     "hubiéramos"   "hubierais"    "hubieran"     "hubiese"     
[206] "hubieses"     "hubiésemos"   "hubieseis"    "hubiesen"     "habiendo"    
[211] "habido"       "habida"       "habidos"      "habidas"      "soy"         
[216] "eres"         "es"           "somos"        "sois"         "son"         
[221] "sea"          "seas"         "seamos"       "seáis"        "sean"        
[226] "seré"         "serás"        "será"         "seremos"      "seréis"      
[231] "serán"        "sería"        "serías"       "seríamos"     "seríais"     
[236] "serían"       "era"          "eras"         "éramos"       "erais"       
[241] "eran"         "fui"          "fuiste"       "fue"          "fuimos"      
[246] "fuisteis"     "fueron"       "fuera"        "fueras"       "fuéramos"    
[251] "fuerais"      "fueran"       "fuese"        "fueses"       "fuésemos"    
[256] "fueseis"      "fuesen"       "siendo"       "sido"         "tengo"       
[261] "tienes"       "tiene"        "tenemos"      "tenéis"       "tienen"      
[266] "tenga"        "tengas"       "tengamos"     "tengáis"      "tengan"      
[271] "tendré"       "tendrás"      "tendrá"       "tendremos"    "tendréis"    
[276] "tendrán"      "tendría"      "tendrías"     "tendríamos"   "tendríais"   
[281] "tendrían"     "tenía"        "tenías"       "teníamos"     "teníais"     
[286] "tenían"       "tuve"         "tuviste"      "tuvo"         "tuvimos"     
[291] "tuvisteis"    "tuvieron"     "tuviera"      "tuvieras"     "tuviéramos"  
[296] "tuvierais"    "tuvieran"     "tuviese"      "tuvieses"     "tuviésemos"  
[301] "tuvieseis"    "tuviesen"     "teniendo"     "tenido"       "tenida"      
[306] "tenidos"      "tenidas"      "tened"       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>stop<span class="ot">&lt;-</span>quanteda<span class="sc">::</span><span class="fu">stopwords</span>(<span class="at">language=</span><span class="st">"spa"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>amlo_df <span class="sc">%&gt;%</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  tidytext<span class="sc">::</span><span class="fu">unnest_tokens</span>(word, text) <span class="sc">%&gt;%</span> </span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>word<span class="sc">%in%</span>stop) <span class="sc">%&gt;%</span>  <span class="co"># ojo con el filtro</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(word) <span class="sc">%&gt;%</span> </span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n) <span class="sc">%&gt;%</span> </span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         word  n     percent
          mil 29 0.014521783
     millones 16 0.008012018
       ciento 15 0.007511267
    inversión 13 0.006509765
         aquí 12 0.006009014
       méxico 12 0.006009014
         país 12 0.006009014
 trabajadores 12 0.006009014
     gobierno 11 0.005508262
 construcción 10 0.005007511</code></pre>
</div>
</div>
</section>
<section id="tokenización-con-udpipe" class="level3">
<h3 class="anchored" data-anchor-id="tokenización-con-udpipe">Tokenización con <code>{udpipe}</code></h3>
<p>Para mayor información consultar <a href="https://ufal.mff.cuni.cz/~straka/papers/2017-conll_udpipe.pdf" class="uri">https://ufal.mff.cuni.cz/~straka/papers/2017-conll_udpipe.pdf</a></p>
<p>Primero vamos a bajar nuestro modelo en español</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>udmodel <span class="ot">&lt;-</span> <span class="fu">udpipe_download_model</span>(<span class="at">language =</span> <span class="st">"spanish"</span>)  <span class="co"># esto trabaja con la estructura del español</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Downloading udpipe model from https://raw.githubusercontent.com/jwijffels/udpipe.models.ud.2.5/master/inst/udpipe-ud-2.5-191206/spanish-gsd-ud-2.5-191206.udpipe to /Users/anaescoto/Dropbox/2023/PAPIME2023/demos/spanish-gsd-ud-2.5-191206.udpipe</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> - This model has been trained on version 2.5 of data from https://universaldependencies.org</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> - The model is distributed under the CC-BY-SA-NC license: https://creativecommons.org/licenses/by-nc-sa/4.0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> - Visit https://github.com/jwijffels/udpipe.models.ud.2.5 for model license details.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> - For a list of all models and their licenses (most models you can download with this package have either a CC-BY-SA or a CC-BY-SA-NC license) read the documentation at ?udpipe_download_model. For building your own models: visit the documentation by typing vignette('udpipe-train', package = 'udpipe')</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Downloading finished, model stored at '/Users/anaescoto/Dropbox/2023/PAPIME2023/demos/spanish-gsd-ud-2.5-191206.udpipe'</code></pre>
</div>
</div>
<p>Vamos a “tokenizar” el discurso de AMLO:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>amlo_udpipe<span class="ot">&lt;-</span><span class="fu">udpipe</span>(<span class="at">x =</span>amlo, </span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">object=</span>udmodel) <span class="co">#"tokeniza" el texto</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Además de separarnos las palabras, también distingue puntuación (por eso tiene más líneas que las palabras), pero también nos da las “Universal POS tags”, donde POS=part-of-speech, que están en la variable “upos”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>amlo_udpipe <span class="sc">%&gt;%</span> </span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   doc_id paragraph_id sentence_id
1    doc1            1           1
2    doc1            1           1
3    doc1            1           1
4    doc1            1           1
5    doc2            1           1
6    doc2            1           1
7    doc2            1           1
8    doc3            1           1
9    doc3            1           1
10   doc3            1           1
                                            sentence start end term_id token_id
1                                   Amigas y amigos,     1   6       1        1
2                                   Amigas y amigos,     8   8       2        2
3                                   Amigas y amigos,    10  15       3        3
4                                   Amigas y amigos,    16  16       4        4
5                              Invitados especiales,     1   9       1        1
6                              Invitados especiales,    11  20       2        2
7                              Invitados especiales,    21  21       3        3
8  Presidentes municipales, presidentas municipales,     1  11       1        1
9  Presidentes municipales, presidentas municipales,    13  23       2        2
10 Presidentes municipales, presidentas municipales,    24  24       3        3
         token      lemma  upos xpos                   feats head_token_id
1       Amigas      amiga  NOUN &lt;NA&gt;  Gender=Fem|Number=Plur             0
2            y          y CCONJ &lt;NA&gt;                    &lt;NA&gt;             3
3       amigos      amigo  NOUN &lt;NA&gt; Gender=Masc|Number=Plur             1
4            ,          , PUNCT &lt;NA&gt;                    &lt;NA&gt;             1
5    Invitados   invitado  NOUN &lt;NA&gt; Gender=Masc|Number=Plur             0
6   especiales   especial   ADJ &lt;NA&gt;             Number=Plur             1
7            ,          , PUNCT &lt;NA&gt;                    &lt;NA&gt;             1
8  Presidentes presidente  NOUN &lt;NA&gt; Gender=Masc|Number=Plur             0
9  municipales  municipal   ADJ &lt;NA&gt;             Number=Plur             1
10           ,          , PUNCT &lt;NA&gt;                    &lt;NA&gt;             4
   dep_rel deps            misc
1     root &lt;NA&gt;            &lt;NA&gt;
2       cc &lt;NA&gt;            &lt;NA&gt;
3     conj &lt;NA&gt;   SpaceAfter=No
4    punct &lt;NA&gt; SpacesAfter=\\n
5     root &lt;NA&gt;            &lt;NA&gt;
6     amod &lt;NA&gt;   SpaceAfter=No
7    punct &lt;NA&gt; SpacesAfter=\\n
8     root &lt;NA&gt;            &lt;NA&gt;
9     amod &lt;NA&gt;   SpaceAfter=No
10   punct &lt;NA&gt;            &lt;NA&gt;</code></pre>
</div>
</div>
<p>¿Con cuales UPOS se trabaja? <a href="https://universaldependencies.org/u/pos/" class="uri">https://universaldependencies.org/u/pos/</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>amlo_udpipe <span class="sc">%&gt;%</span> </span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(upos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  upos   n      percent valid_percent
   ADJ 280 0.0602668963  0.0610953524
   ADP 715 0.1538958244  0.1560113463
   ADV 189 0.0406801550  0.0412393629
   AUX 179 0.0385277658  0.0390573860
 CCONJ 194 0.0417563495  0.0423303513
   DET 607 0.1306500215  0.1324459961
  INTJ   1 0.0002152389  0.0002181977
  NOUN 889 0.1913473956  0.1939777438
   NUM 126 0.0271201033  0.0274929086
  PRON 207 0.0445544554  0.0451669212
 PROPN 166 0.0357296599  0.0362208161
 PUNCT 466 0.1003013345  0.1016801222
 SCONJ 137 0.0294877314  0.0298930831
   SYM   1 0.0002152389  0.0002181977
  VERB 426 0.0916917779  0.0929522147
  &lt;NA&gt;  63 0.0135600517            NA</code></pre>
</div>
</div>
<p>¿Qué no logró identificar?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>amlo_udpipe <span class="sc">%&gt;%</span> </span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(upos)) <span class="sc">%&gt;%</span> </span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(token)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      token  n    percent
         Al  1 0.01587302
  agregarse  2 0.03174603
         al 21 0.33333333
      darle  1 0.01587302
  dedicarse  1 0.01587302
        del 35 0.55555556
 haciéndole  1 0.01587302
  venderlos  1 0.01587302</code></pre>
</div>
</div>
<p>La clasificación de las UPOS nos permite hacer filtro por el tipo de palabra que queremos analizar, seguro los sustantivos son los que más queremos revisar:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>amlo_udpipe <span class="sc">%&gt;%</span> </span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(upos<span class="sc">==</span><span class="st">"NOUN"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(token) <span class="sc">%&gt;%</span> </span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n) <span class="sc">%&gt;%</span> </span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        token  n     percent
     millones 16 0.017997750
    inversión 13 0.014623172
         país 12 0.013498313
 trabajadores 12 0.013498313
 construcción 10 0.011248594
     gobierno 10 0.011248594
    refinería  9 0.010123735
       tiempo  9 0.010123735
      trabajo  9 0.010123735
     política  8 0.008998875</code></pre>
</div>
</div>
<p>Además de los “tokens” podemos pedirles los “lemma”, que como vemos quita el género y el número</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>amlo_udpipe <span class="sc">%&gt;%</span> </span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(upos<span class="sc">==</span><span class="st">"NOUN"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(lemma) <span class="sc">%&gt;%</span> </span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n) <span class="sc">%&gt;%</span> </span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      lemma  n    percent
     millón 19 0.02137233
       país 16 0.01799775
  inversión 13 0.01462317
  refinería 13 0.01462317
    empresa 12 0.01349831
   gobierno 12 0.01349831
       obra 12 0.01349831
     tiempo 12 0.01349831
 trabajador 12 0.01349831
        año 11 0.01237345</code></pre>
</div>
</div>
</section>
</section>
<section id="estadísticas-de-las-palabras" class="level2">
<h2 class="anchored" data-anchor-id="estadísticas-de-las-palabras">Estadísticas de las palabras</h2>
<p>Tenemos que una función en <code>{udpipe}</code> que se llama <code>txt_freq()</code>, es como un tabulado, pero nos da la frecuencia ordenada de mayor a m enor y los porcentajes relativos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>amlo_udpipe <span class="sc">%&gt;%</span> </span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(upos<span class="sc">==</span><span class="st">"NOUN"</span>) <span class="sc">%&gt;%</span> <span class="co"># nos vamos a quedar ahorita solo con los nombres</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">with</span>(</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">txt_freq</span>(token) <span class="co"># ojo hay que poner el with, porque no es formato tidy el comando</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="co"># elegir número</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            key freq  freq_pct
1      millones   16 1.7997750
2     inversión   13 1.4623172
3          país   12 1.3498313
4  trabajadores   12 1.3498313
5      gobierno   10 1.1248594
6  construcción   10 1.1248594
7     refinería    9 1.0123735
8        tiempo    9 1.0123735
9       trabajo    9 1.0123735
10     política    8 0.8998875</code></pre>
</div>
</div>
<p>Utilizando <code>{ggplot2}</code>, una vez que tenemos esta tabla, podemos hacer una gráfica</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>amlo_udpipe <span class="sc">%&gt;%</span> </span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(upos<span class="sc">==</span><span class="st">"NOUN"</span>) <span class="sc">%&gt;%</span> <span class="co"># nos vamos a quedar ahorita solo con los nombres</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">with</span>(</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">txt_freq</span>(token) <span class="co"># ojo hay que poner el with, porque no es formato tidy el comando</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>) <span class="sc">%&gt;%</span> <span class="co"># me voy a quedar con las primeras 20 palabras</span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x=</span>key, </span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">y=</span>freq) <span class="sc">+</span></span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span> <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="t5_texto_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Pero no está ordenado ….</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>amlo_udpipe <span class="sc">%&gt;%</span> </span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(upos<span class="sc">==</span><span class="st">"NOUN"</span>) <span class="sc">%&gt;%</span> <span class="co"># nos vamos a quedar ahorita solo con los nombres</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">with</span>(</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">txt_freq</span>(token) <span class="co"># ojo hay que poner el with, porque no es formato tidy el comando</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>) <span class="sc">%&gt;%</span> <span class="co"># me voy a quedar con las primeras 20 palabras</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">key =</span> forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(key, freq)) <span class="sc">%&gt;%</span> <span class="co"># aquí ordeno de acuerdo a las frecuencias</span></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="co"># aquí ya empieza el gráfico</span></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">aes</span>(<span class="at">x=</span>key, </span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">y=</span>freq) <span class="sc">+</span></span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill=</span><span class="st">"blue"</span>, <span class="at">alpha=</span><span class="fu">I</span>(<span class="fl">0.5</span>)) <span class="sc">+</span> </span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Sustantivos"</span>, <span class="at">y=</span><span class="st">"Frecuencia"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="t5_texto_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="comparando-tokens-palabras-y-más" class="level2">
<h2 class="anchored" data-anchor-id="comparando-tokens-palabras-y-más">Comparando tokens, palabras y más</h2>
<p>Para comparar mejor, descargamos otro discurso:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>amlo2 <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">"text/20220916_amlo.txt"</span>) </span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>count2<span class="ot">&lt;-</span>tokenizers<span class="sc">::</span><span class="fu">count_words</span>(amlo2) </span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>amlo2<span class="ot">&lt;-</span>amlo2[<span class="sc">!</span>count2<span class="sc">==</span><span class="dv">0</span>] </span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>amlo2_udpipe<span class="ot">&lt;-</span><span class="fu">udpipe</span>(<span class="at">x =</span>amlo2, </span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">object=</span>udmodel) <span class="co">#"tokeniza" el texto</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Podemos revisar qué tanto se pueden comparar estos textos utilizando <code>{udpipe}</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>sustant1<span class="ot">&lt;-</span>amlo_udpipe <span class="sc">%&gt;%</span> <span class="fu">filter</span>(upos<span class="sc">==</span><span class="st">"NOUN"</span>)</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>sustant2<span class="ot">&lt;-</span>amlo2_udpipe <span class="sc">%&gt;%</span> <span class="fu">filter</span>(upos<span class="sc">==</span><span class="st">"NOUN"</span>)</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>comunes<span class="ot">&lt;-</span>udpipe<span class="sc">::</span><span class="fu">txt_overlap</span>(sustant1<span class="sc">$</span>lemma, <span class="co"># texto 1</span></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>                    sustant1<span class="sc">$</span>lemma) <span class="co"># texto 2</span></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a>comunes <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "amiga"      "amigo"      "invitado"   "presidente" "presidenta"
 [6] "gobernador" "jefa"       "gobierno"   "Servidor"   "amiga"     </code></pre>
</div>
</div>
<p>Esta función nos da todas las palabras(o lemmas) comunes a ambos textos.</p>
</section>
<section id="nubes-de-palabras" class="level2">
<h2 class="anchored" data-anchor-id="nubes-de-palabras">Nubes de palabras</h2>
<p>Otra forma muy común para presentar cuántas palabras hay y su frecuencia son las nubes de palabras</p>
<p>Lo primero es que quizas sea más fácil tener un objeto con los conteos de palabras que encontramos usando txt_frq</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>df_nube<span class="ot">&lt;-</span>amlo_udpipe <span class="sc">%&gt;%</span> </span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(upos<span class="sc">==</span><span class="st">"NOUN"</span>) <span class="sc">%&gt;%</span> <span class="co"># nos vamos a quedar ahorita solo con los nombres</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">with</span>(</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">txt_freq</span>(token) <span class="co"># ojo hay que poner el with, porque no es formato tidy el comando</span></span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>    ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>O si queremos usar todas las palabras independientemente de su función, podemos utilizar las palabras stop:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>df_nube2<span class="ot">&lt;-</span>amlo_df <span class="sc">%&gt;%</span> </span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word,text) <span class="sc">%&gt;%</span> </span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>word<span class="sc">%in%</span>stop) <span class="sc">%&gt;%</span>  <span class="co"># ojo con el filtro</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(word) </span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>df_nube2 <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> word n      percent
  069 1 0.0005007511
   10 1 0.0005007511
  100 2 0.0010015023
  109 1 0.0005007511
   11 1 0.0005007511
   12 1 0.0005007511
   14 3 0.0015022534
   17 1 0.0005007511
  183 1 0.0005007511
   19 2 0.0010015023</code></pre>
</div>
</div>
<p>Ojo, aquí no se quitan algunos elementos como números. Esto es muy fácil utilizando {stringr}</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>df_nube2 <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(word, <span class="st">"[digits]"</span>))</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>df_nube2 <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           word n      percent
       abiertas 1 0.0005007511
       acabamos 1 0.0005007511
       acciones 1 0.0005007511
         acción 3 0.0015022534
     aclaración 1 0.0005007511
 acontecimiento 1 0.0005007511
        actitud 2 0.0010015023
      actividad 1 0.0005007511
       actuales 1 0.0005007511
     actualidad 1 0.0005007511</code></pre>
</div>
</div>
<p>Hoy será más fácil hacer nuestra nube</p>
<section id="nube-con-wordcloud" class="level3">
<h3 class="anchored" data-anchor-id="nube-con-wordcloud">Nube con <code>{wordcloud}</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>) <span class="co"># ojo es importante para que se vea siempre igual. Pero no es grave si no se pone</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>wordcloud<span class="sc">::</span><span class="fu">wordcloud</span>(<span class="at">words =</span>df_nube<span class="sc">$</span>key, <span class="co"># columna donde se listan las palabras</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">freq =</span> df_nube<span class="sc">$</span>freq, <span class="co"># columna donde están las frecuencias</span></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">min.freq =</span> <span class="dv">5</span>, <span class="co"># valor mínimo para incluirla</span></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">max.words=</span><span class="dv">200</span>, <span class="co">#Máximo de palabras</span></span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">random.order=</span><span class="cn">FALSE</span>, <span class="co">#plot words in random order. If false, they will be plotted in decreasing frequency</span></span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a>                     <span class="at">rot.per=</span><span class="fl">0.35</span>, <span class="co"># proportion words with 90 degree rotation</span></span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">colors=</span><span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>) <span class="co"># paleta de colores, aquí usamos uno de RColorBrewer</span></span>
<span id="cb105-10"><a href="#cb105-10" aria-hidden="true" tabindex="-1"></a>                     )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="t5_texto_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="nube-con-ggwordcloud" class="level3">
<h3 class="anchored" data-anchor-id="nube-con-ggwordcloud">Nube con <code>{ggwordcloud}</code></h3>
<p>Ya conocemos bastante el formato tidy, y sabemos de las ventajas de que nuestros gráficos sean ggplot</p>
<p>Aquí las estéticas que tenemos son “label” = columna donde están están las palabraas</p>
<pre><code>df_palabras %&gt;% 
  ggplot(
    aes(label= variable donde están las palabras, 
        size = variable donde está la frecuencia))+
  geom_text_wordcloud # la geometría especial.</code></pre>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>df_nube <span class="sc">%&gt;%</span> </span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(freq<span class="sc">&gt;</span><span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="co"># hacemos un filtro porque muchas no se ven bien</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">label=</span>key,</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">size=</span>freq) <span class="sc">+</span></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_wordcloud</span>() <span class="sc">+</span></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="t5_texto_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>df_nube <span class="sc">%&gt;%</span> </span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(freq<span class="sc">&gt;</span><span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="co"># hacemos un filtro porque muchas no se ven bien</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">label=</span>key,</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">size=</span>freq) <span class="sc">+</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_wordcloud_area</span>() <span class="sc">+</span></span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="t5_texto_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Se ve igual… dice la ayuda</p>
<blockquote class="blockquote">
<p>geom_text_wordcloud_area is an <em>alias</em> with a different set of default, that chooses a font size so that the area of the text is now related to the size aesthetic.</p>
</blockquote>
<p>No se ve tan divertida….</p>
<p>Una de las cosas que hacía bonita a nuestra primera nube era el elemento aleatorio. Para ello vamos a necesitar saber cuántas filas tenemos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>df_nube <span class="sc">%&gt;%</span> </span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(freq<span class="sc">&gt;</span><span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dim</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 76  3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>df_nube <span class="sc">%&gt;%</span> </span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(freq<span class="sc">&gt;</span><span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="co"># hacemos un filtro porque muchas no se ven bien</span></span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">label =</span>key, </span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> freq,</span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="fu">factor</span>(<span class="fu">sample.int</span>(<span class="dv">10</span>, <span class="dv">76</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)) <span class="co"># elegirá 10 colores aleatorios entre las 76 palabras</span></span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">+</span></span>
<span id="cb111-11"><a href="#cb111-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_wordcloud_area</span>() <span class="sc">+</span></span>
<span id="cb111-12"><a href="#cb111-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_area</span>(<span class="at">max_size =</span> <span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb111-13"><a href="#cb111-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="t5_texto_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Ya va agarrando… necesitamos los ángulos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>df_nube <span class="sc">%&lt;&gt;%</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">angulo =</span> <span class="dv">90</span> <span class="sc">*</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="dv">60</span>, <span class="dv">40</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>¿Qué hicimos? De manera aleatoria ponemos una variable que define los ángulos para cada una de las líneas de nuestra base</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>df_nube <span class="sc">%&gt;%</span> </span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(freq<span class="sc">&gt;</span><span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="co"># hacemos un filtro porque muchas no se ven bien</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">label =</span>key, </span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> freq,</span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="fu">factor</span>(<span class="fu">sample.int</span>(<span class="dv">10</span>, <span class="dv">76</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)), <span class="co"># elegirá 10 colores aleatorios entre las 76 palabras</span></span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">angle=</span> angulo) <span class="sc">+</span></span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_wordcloud</span>(<span class="at">rm_outside =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_size_area(max_size = 8) +</span></span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="t5_texto_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Es tu momento de brillar: haz una nube con el segundo discurso.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Sitio web del Proyecto PAPIME PE303423 Recursos didácticos para la enseñanza de la Sociodemografía</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">con apoyo DGAPA-UNAM</div>
  </div>
</footer>



</body></html>